---
const { title, subTitle, excerpt, features, links } = Astro.props;
---

<section>
  <div class="relative mx-auto max-w-7xl py-8 px-6 lg:px-8">
    <div class="max-w-3xl">
      <p class="text-sm leading-normal font-bold uppercase text-accent-600">
        {subTitle}
      </p>
      <h2
        class="text-xl leading-tight tracking-tight sm:text-2xl md:text-3xl lg:text-4xl mt-4 font-semibold text-base-900 lg:text-balance"
      >
        {title}
      </h2>
      <p class="text-base leading-normal mt-4 text-base-500 font-medium">
        {excerpt}
      </p>
    </div>

    <!-- Features Section -->
    <ul
      role="list"
      class="py-4 gap-1 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-1"
    >
      {
        features?.map((feature) => (
          <li>
            <div class="flex items-center gap-4">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
                class="icon icon-tabler icons-tabler-outline icon-tabler-circle-check size-5 text-accent-600"
                slot="icon"
              >
                <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                <path
                  d="M17 3.34a10 10 0 1 1 -14.995 8.984l-.005 -.324l.005 -.324a10 10 0 0 1 14.995 -8.336zm-1.293 5.953a1 1 0 0 0 -1.32 -.083l-.094 .083l-3.293 3.292l-1.293 -1.292l-.094 -.083a1 1 0 0 0 -1.403 1.403l.083 .094l2 2l.094 .083a1 1 0 0 0 1.226 0l.094 -.083l4 -4l.083 -.094a1 1 0 0 0 -.083 -1.32z"
                  stroke-width="0"
                  fill="currentColor"
                />
              </svg>
              <div class="text-base leading-normal">
                <h3 class="text-base leading-normal  text-base-900 font-normal">
                  {feature.title}

                  {feature.summary && feature.description && (
                    <span class="mt-2 text-sm text-accent-600 font-normal">
                      — {feature.summary}
                    </span>
                  )}
                </h3>
              </div>
            </div>
          </li>
        ))
      }
    </ul>

    {
      links && links.length > 0 && (
        <div class="mt-8 flex flex-wrap items-center gap-4">
          {links.map((link, index) => {
            if (!link || Object.keys(link).length === 0) return null;

            const isPrimary = index === 0;
            let href = "#";
            let isExternal = false;

            if (link.type === "internal" && link.internalLink?.value?.slug) {
              href = `/${link.internalLink.value.slug}`;
            } else if (link.type === "external" && link.externalLink) {
              href = link.externalLink;
              isExternal = true;
            } else if (link.url) {
              href = link.url;
              isExternal = link.url.startsWith("http");
            }

            const linkProps = isExternal
              ? { target: "_blank", rel: "noopener noreferrer" }
              : {};

            // Determine variant: use link.variant if provided, otherwise default to primary for first, link for others
            const variant = link.variant || (isPrimary ? "primary" : "link");

            // Define button styles based on variant
            let buttonClass = "";
            let showArrow = false;

            switch (variant) {
              case "primary":
                buttonClass =
                  "inline-flex items-center justify-center rounded-lg bg-primary-600 text-white hover:bg-primary-700 px-6 py-3 text-sm font-semibold shadow-sm transition-colors";
                break;
              case "secondary":
                buttonClass =
                  "inline-flex items-center justify-center rounded-lg border-2 border-primary-600 text-primary-600 hover:bg-primary-50 px-6 py-3 text-sm font-semibold transition-colors";
                break;
              case "outline":
                buttonClass =
                  "inline-flex items-center justify-center rounded-lg border border-gray-300 text-gray-900 hover:border-primary-600 hover:text-primary-600 px-6 py-3 text-sm font-semibold transition-colors";
                break;
              case "ghost":
                buttonClass =
                  "inline-flex items-center justify-center rounded-lg text-gray-900 hover:bg-gray-100 px-6 py-3 text-sm font-semibold transition-colors";
                break;
              case "link":
                buttonClass =
                  "inline-flex items-center justify-center text-sm font-semibold text-gray-900 hover:text-primary-600 transition-colors";
                showArrow = true;
                break;
              default:
                buttonClass =
                  "inline-flex items-center justify-center rounded-lg bg-primary-600 text-white hover:bg-primary-700 px-6 py-3 text-sm font-semibold shadow-sm transition-colors";
            }

            return (
              <a href={href} {...linkProps} class={buttonClass}>
                {link?.label || link?.text || "Learn More"}
                {showArrow && (
                  <span class="ml-1" aria-hidden="true">
                    →
                  </span>
                )}
              </a>
            );
          })}
        </div>
      )
    }
  </div>
  <!-- <div class="w-full mt-12 -mb-12">
      <img
        src="/images/dashboardLight.svg"
        alt="#_"
        class="w-full shadow rounded-t-2xl"
      />
    </div> -->
</section>
