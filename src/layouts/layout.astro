---
import { fade, ViewTransitions } from "astro:transitions";
import Header from "../components/Header.astro";
import Footer from "../components/Footer.astro";

import classNames from "classnames";

const { tenant } = Astro.props;
const { title } = tenant || Astro.props;

const contentTitle = Astro.props.title || "Narr8";

import "../styles/global.css";
import "../styles/prose.css";
---

<!doctype html>
<html
  lang="en"
  dir="ltr"
  class=`scrollbar-hide md:scrollbar-default-x light scrollbar-thumb-gray-700 scrollbar-track-gray-100 scrollbar-thin scrollbar-track-rounded-full bg-zinc-300-x scroll-smooth`
  transition:animate={fade({ duration: "0.4s" })}
>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="generator" content={Astro.generator} />

    <title>
      {contentTitle + " - " + Astro.locals?.tenant?.name || "Narr8"}
    </title>
    <link rel="icon" href="/favicon.ico" />

    <ViewTransitions />
  </head>

  <!--  -->
  <body
    class={classNames(
      // "bg-white text-gray-900 dark:bg-gray-900 dark:text-gray-100",
      // "bg-gray-50",
      "antialiased font-sans",
      "min-h-screen flex flex-col",
      "bg-fixed-x scrollbar-hide md:scrollbar-default-x inset-y-0 w-full bg-[url('/beams-components.png')] bg-[length:1000px_700px] bg-[position:calc(50%_+_190px)_-50px] bg-no-repeat lg:block pb-10"
      // "bg-[url('/beams-components.png')] bg-[length:1000px_700px] bg-[position:calc(50%_+_190px)_-50px] bg-no-repeat lg:block dark:bg-black pb-10"
    )}
  >
    <Header title={title || "Narr8"} />

    <!-- Main Content -->
    <main id="main-content" class="mx-auto w-full py-10-none min-h-full">
      <!-- Scroll to Top Button -->
      <div
        x-data="{ isVisible: false }"
        x-init="window.addEventListener('scroll', () => { isVisible = window.scrollY > 150; })"
        class="fixed bottom-6 right-6 z-50"
        x-show="isVisible"
        x-transition:enter="transition ease-out duration-300"
        x-transition:enter-start="opacity-0 transform translate-y-2"
        x-transition:enter-end="opacity-100 transform translate-y-0"
        x-transition:leave="transition ease-in duration-300"
        x-transition:leave-start="opacity-100 transform translate-y-0"
        x-transition:leave-end="opacity-0 transform translate-y-2"
      >
        <button
          @click="window.scrollTo({ top: 0, behavior: 'smooth' })"
          class="inline-flex items-center gap-2 justify-center rounded-lg py-2 px-6 text-sm outline-offset-2 transition bg-zinc-800 text-white font-medium hover:bg-zinc-700 dark:hover:text-neutral-50 w-full cursor-pointer"
        >
          Scroll to top
        </button>
      </div>

      <slot />

      <!-- <SocialShare {...Astro.props} /> -->

      <Footer {...Astro.props} />
    </main>
  </body>
</html>
